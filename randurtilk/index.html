<!DOCTYPE html>
<html lang="et">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rändur Tilk</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <link href="https://vjs.zencdn.net/8.23.3/video-js.css" rel="stylesheet" />

    <style>
        body {
            background: #111;
            color: white;
            text-align: center;
            font-family: sans-serif;
        }
        ruffle-player {
            border: 2px solid #444;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Rändur Tilk — Powered by Ruffle</h1>

<h1>Made AS Estonja Water and Dog Expert Tech</h1>

    <!-- SWF mäng Ruffle'iga -->
    <object>
        <embed src="/index.swf" width="1080" height="800" />
    </object>

    <!-- Helimängija Video.js abil -->
    <h2>Music</h2>
    <video
        id="my-player"
        class="video-js vjs-default-skin"
        controls
        autoplay
        preload="auto"
        width="640"
        height="50"
    ></video>



    <!-- Ruffle skript -->
    <script src="/assets/ruffle/ruffle.js"></script>

    <!-- Video.js -->
    <script src="https://vjs.zencdn.net/8.23.3/video.min.js"></script>
    <script>
        const playlist = [
            "sound/menu.mp3",
            "sound/osa1.mp3",
            "sound/osa2.mp3",
            "sound/osa3.mp3",
            "sound/osa4.mp3",
            "sound/osa5.mp3",
            "sound/osa6.mp3",
            "sound/osa7.mp3",
            "sound/osa8.mp3"
        ];

        let currentTrack = 0;
        const player = videojs("my-player", {
            controls: true,
            autoplay: true,
            preload: "auto"
        });

        function playTrack(index) {
            if (index >= playlist.length) return;
            player.src({ type: "audio/mp3", src: playlist[index] });
            player.play();
        }

        player.on("ended", () => {
            currentTrack++;
            if (currentTrack < playlist.length) {
                playTrack(currentTrack);
            } else {
                currentTrack = 0; // loop kogu playlist
                playTrack(currentTrack);
            }
        });


        playTrack(currentTrack);
    </script>
</body>
</html>